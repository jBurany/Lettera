<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="pageTitle">Pagar carta personalizada</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Overlay de selección de idioma -->
  <div id="langOverlay"
       class="fixed inset-0 bg-white/90 flex items-center justify-center z-50"
       style="display: none;">
    <div class="bg-white p-8 rounded-xl shadow-lg text-center">
      <h2 class="text-2xl mb-4">Selecciona tu idioma / Select your language</h2>
      <button onclick="setLanguage('es')" class="mx-2 px-4 py-2 bg-pink-500 text-white rounded">Español</button>
      <button onclick="setLanguage('en')" class="mx-2 px-4 py-2 bg-blue-600 text-white rounded">English</button>
    </div>
  </div>

  <main class="max-w-2xl mx-auto py-10 px-4 overflow-auto">

    <h1 id="tituloCarta" data-i18n="loadingTitle" class="text-3xl font-bold mb-6 text-center">
      Cargando…
    </h1>

    <div class="bg-white rounded-xl shadow p-6">

      <p id="descripcionCarta"
         data-i18n="loadingDesc"
         class="text-gray-700 text-sm mb-6 text-center">
        Por favor espera mientras cargamos los detalles de tu carta.
      </p>

      <h2 data-i18n="choosePlan" class="text-lg font-semibold mb-2 text-center">
        Elegí tu plan:
      </h2>

      <div class="space-y-4">
        <button id="planBasico"
                data-i18n="basicPlan"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl">
          Plan Básico
        </button>
        <button id="planIntermedio"
                data-i18n="intermediatePlan"
                class="w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-xl">
          Plan Intermedio
        </button>
        <button id="planCompleto"
                data-i18n="completePlan"
                class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl">
          Plan Completo
        </button>
      </div>
    </div>

  </main>

  <!-- Integración de lang.js -->
  <script src="js/lang.js"></script>
  <script>
    initLanguage();
  </script>

  <!-- Integración de payment.js -->
  <script src="js/payment.js"></script>
  <script>
    // Una vez cargado el idioma, inicializamos los botones y dinámicos
    document.addEventListener('DOMContentLoaded', () => {
      initPaymentButtons();

      // Título y descripción según tipoCarta + idioma
      const lang = sessionStorage.getItem('lang') || 'es';
      const tipo = new URLSearchParams(location.search).get("tipoCarta") || "amor";
      document.getElementById('tituloCarta').textContent     = translations[lang][`title_${tipo}`];
      document.getElementById('descripcionCarta').textContent = translations[lang][`desc_${tipo}`];
    });
  </script>
</body>
</html>
