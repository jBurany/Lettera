<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="pageTitle">Pagar carta personalizada</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">

  <!-- Overlay de selección de idioma -->
  <div id="langOverlay"
       class="fixed inset-0 bg-white/90 flex items-center justify-center z-50"
       style="display: none;">
    <div class="bg-white p-8 rounded-xl shadow-lg text-center">
      <h2 class="text-2xl mb-4">Selecciona tu idioma / Select your language</h2>
      <button onclick="setLanguage('es')" class="mx-2 px-4 py-2 bg-pink-500 text-white rounded">Español</button>
      <button onclick="setLanguage('en')" class="mx-2 px-4 py-2 bg-blue-600 text-white rounded">English</button>
    </div>
  </div>

  <!-- Contenido principal -->
  <main id="content" class="max-w-2xl mx-auto py-10 px-4">
    <h1 id="pageTitle" data-i18n="pageTitle" class="text-3xl font-bold mb-6 text-center">
      Pagar carta personalizada
    </h1>

    <p id="choosePlan" data-i18n="choosePlan" class="text-lg font-semibold mb-4 text-center">
      Elegí tu plan:
    </p>

    <div class="space-y-4">
      <button id="planBasico"
              data-i18n="basicPlan"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl">
        Plan Básico
      </button>
      <button id="planIntermedio"
              data-i18n="intermediatePlan"
              class="w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 rounded-xl">
        Plan Intermedio
      </button>
      <button id="planCompleto"
              data-i18n="completePlan"
              class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl">
        Plan Completo
      </button>
    </div>
  </main>

  <script>
    // Diccionario de traducciones
    const translations = {
      es: {
        pageTitle:      "Pagar carta personalizada",
        choosePlan:     "Elegí tu plan:",
        basicPlan:      "Plan Básico",
        intermediatePlan:"Plan Intermedio",
        completePlan:   "Plan Completo"
      },
      en: {
        pageTitle:      "Pay for your letter",
        choosePlan:     "Choose your plan:",
        basicPlan:      "Basic Plan",
        intermediatePlan:"Intermediate Plan",
        completePlan:   "Complete Plan"
      }
    };

    // Aplica las traducciones a todos los elementos marcados
    function applyTranslations(lang) {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
      document.title = translations[lang]?.pageTitle || document.title;
    }

    // Selección de idioma
    function setLanguage(lang) {
      sessionStorage.setItem('lang', lang);
      applyTranslations(lang);
      document.getElementById('langOverlay').style.display = 'none';
    }

    // Simulación de pago: redirige al formulario con paid=true
    function simulatePayment(plan) {
      const tipoCarta = new URLSearchParams(window.location.search).get("tipoCarta") || "amor";
      window.location.href = `/formulario.html?tipoCarta=${tipoCarta}&plan=${plan}&paid=true`;
    }

    document.addEventListener('DOMContentLoaded', () => {
      // Mostrar overlay si no hay idioma en sesión
      const overlay = document.getElementById('langOverlay');
      const lang = sessionStorage.getItem('lang');
      if (!lang) {
        overlay.style.display = 'flex';
      } else {
        overlay.style.display = 'none';
        applyTranslations(lang);
      }

      // Botones de plan
      document.getElementById('planBasico').addEventListener('click', () => simulatePayment('basico'));
      document.getElementById('planIntermedio').addEventListener('click', () => simulatePayment('intermedio'));
      document.getElementById('planCompleto').addEventListener('click', () => simulatePayment('completo'));
    });
  </script>
</body>
</html>
